<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Happy 16th Monthsary</title>

  <style>
  /*
   * CSS Styling for the Digital Time Capsule Website
   * Using a clean, modern aesthetic with a touch of warmth.
   */

  :root {
    --primary-color: #A0C4FF;
    --secondary-color: #BDB2FF;
    --accent-color: #FFC6FF;
    --text-color: #333;
    --background-color: #F8F9FA;
    --card-background: #FFFFFF;
    --border-radius: 10px;
    --shadow-light: 0 4px 8px rgba(0, 0, 0, 0.1);
    --shadow-medium: 0 8px 16px rgba(0, 0, 0, 0.15);
  }

  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 0;
    background-color: var(--background-color);
    color: var(--text-color);
    line-height: 1.6;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
  }

  header {
    background-color: var(--primary-color);
    color: white;
    padding: 2.5em 0;
    text-align: center;
    width: 100%;
    box-shadow: var(--shadow-medium);
    margin-bottom: 2em;
  }

  header h1 {
    margin: 0;
    font-size: 2.8em;
    letter-spacing: 1px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
  }

  header p {
    font-size: 1.2em;
    margin-top: 0.5em;
  }

  .countdown-container {
    margin-top: 1.5em;
    background-color: rgba(255, 255, 255, 0.2);
    padding: 10px 20px;
    border-radius: var(--border-radius);
    font-size: 1.1em;
    font-weight: bold;
    color: white;
  }

  .container {
    width: 90%;
    max-width: 1000px;
    margin: 0 auto 3em auto;
    display: grid;
    gap: 2.5em;
    grid-template-columns: 1fr;
    padding: 0 1em;
  }

  @media (min-width: 768px) {
    .container {
      grid-template-columns: 1fr 1fr;
      padding: 0;
      gap: 2.5em;
    }
  }

  .card {
    background-color: var(--card-background);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-light);
    padding: 1.5em;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    position: relative;
    overflow: hidden;
  }

  .card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-medium);
  }

  h2 {
    color: var(--primary-color);
    text-align: center;
    margin-bottom: 1.5em;
    font-size: 2em;
    position: relative;
  }

  h2::after {
    content: '';
    width: 50px;
    height: 3px;
    background-color: var(--accent-color);
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    bottom: -10px;
    border-radius: 5px;
  }

  .time-capsule-door {
    background-color: var(--secondary-color);
    color: white;
    padding: 1.5em;
    border-radius: var(--border-radius);
    text-align: center;
    cursor: pointer;
    font-size: 1.3em;
    font-weight: bold;
    transition: background-color 0.3s ease, transform 0.3s ease;
    margin-bottom: 1.5em;
    box-shadow: var(--shadow-light);
  }

  .time-capsule-door:hover:not(.locked) {
    background-color: #846fff;
    transform: translateY(-3px);
  }

  .time-capsule-door.locked {
    background-color: #cccccc;
    cursor: not-allowed;
    opacity: 0.7;
  }
  #sealWishesBtn:hover:not(.locked) {
    background-color: #846fff;
    transform: translateY(-2px);
  }
  .capsule-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.7s ease-out, opacity 0.7s ease-out;
    opacity: 0;
  }

  .capsule-content.open {
    max-height: 1000px;
    opacity: 1;
  }

  .memory-item {
    display: flex;
    align-items: center;
    margin-bottom: 1.5em;
    background-color: var(--background-color);
    border-radius: var(--border-radius);
    padding: 1em;
    box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.05);
  }

  .memory-item img {
    width: 100px;
    height: 100px;
    border-radius: 8px;
    object-fit: cover;
    margin-right: 1em;
    border: 2px solid var(--accent-color);
  }

  .memory-item .text-content {
    flex-grow: 1;
  }

  .memory-item h3 {
    color: var(--primary-color);
    margin: 0 0 0.3em;
    font-size: 1.2em;
  }

  .memory-item p {
    font-size: 0.9em;
    color: #555;
    margin-bottom: 0.5em;
  }

  .audio-player {
    width: 100%;
    margin-top: 0.5em;
  }

  textarea {
    width: calc(100% - 20px);
    min-height: 150px;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: var(--border-radius);
    font-family: inherit;
    font-size: 1em;
    resize: vertical;
    margin-bottom: 1em;
  }

  textarea:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(160, 196, 255, 0.3);
  }

  .instructions {
    font-size: 0.9em;
    color: #666;
    text-align: center;
    margin-top: 1em;
    padding: 0 1em;
  }

  .cta-button {
    display: block;
    width: fit-content;
    margin: 1.5em auto 0;
    padding: 0.8em 1.5em;
    background-color: var(--primary-color);
    color: white;
    text-decoration: none;
    border-radius: var(--border-radius);
    font-weight: bold;
    transition: background-color 0.3s ease, transform 0.2s ease;
    border: none;
    cursor: pointer;
    font-size: 1em;
  }

  .cta-button:hover {
    background-color: #84A7E0;
    transform: translateY(-2px);
  }

  .message-box {
    background-color: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
    border-radius: var(--border-radius);
    padding: 10px 15px;
    text-align: center;
    margin-top: 1em;
    font-size: 0.95em;
    opacity: 0;
    transition: opacity 0.5s ease-in-out;
  }

  .message-box.show {
    opacity: 1;
  }

  .wishes-display-area {
    margin-top: 2em;
    padding: 1.5em;
    background-color: var(--background-color);
    border: 1px dashed var(--accent-color);
    border-radius: var(--border-radius);
    min-height: 50px;
    font-style: italic;
    color: #555;
    white-space: pre-wrap;
    word-wrap: break-word;
    max-height: 300px;
    overflow-y: auto;
    box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.05);
  }

  .wishes-display-area p.no-wishes-yet {
    text-align: center;
    color: #999;
    font-size: 0.9em;
    font-style: normal;
    margin: 0;
  }

  .wish-entry {
    background-color: var(--card-background);
    padding: 1em 1.5em;
    border-radius: var(--border-radius);
    margin-bottom: 1em;
    box-shadow: var(--shadow-light);
    border-left: 5px solid var(--primary-color);
  }

  .wish-entry:last-child {
    margin-bottom: 0;
  }

  .wish-entry .date {
    font-size: 0.8em;
    color: #777;
    margin-bottom: 0.5em;
    display: block;
  }

  .wish-entry .content {
    font-size: 1em;
    color: var(--text-color);
    line-height: 1.5;
    white-space: pre-wrap;
  }
  .wish-entry .content {
  text-align: justify;
}
#modalWishText {
  text-align: justify;
}
#modalWishText {
  word-break: break-word;
  white-space: pre-wrap;
}


  footer {
    margin-top: 3em;
    padding: 1.5em;
    text-align: center;
    color: #777;
    font-size: 0.9em;
    width: 100%;
    background-color: var(--background-color);
  }

  /* ‚Äî‚Äî‚Äî MODIFIED AREA START ‚Äî‚Äî‚Äî */
  .modal {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: 1000;
  }

  .modal:not(.hidden) {
    pointer-events: auto;
    opacity: 1;
  }

  .modal-backdrop {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background-color: rgba(0,0,0,0.5);
  }

.modal-content {
  width: 90%;
  max-width: 500px;
  margin: 5% auto;
  padding: 1.5em;
  background: var(--card-background);
  border-radius: var(--border-radius);
  box-shadow: var(--shadow-medium);
  position: relative;
  z-index: 1001;
  max-height: 90vh;
  overflow-y: auto;
  box-sizing: border-box; /* ADD THIS to fix overflow */
}

  .modal-close {
    position: absolute;
    top: 0.5em; right: 0.7em;
    background: none; border: none;
    font-size: 1.5em; cursor: pointer;
  }

.modal-body {
  max-height: 60vh;
  overflow-y: auto;
  padding-right: 10px;
  word-wrap: break-word;      /* ADD */
  overflow-wrap: break-word;  /* ADD */
  box-sizing: border-box;     /* ADD */
}

  .modal-body p {
    white-space: pre-wrap;
    line-height: 1.5;
    margin-bottom: 1.5em;
  }
  /* ‚Äî‚Äî‚Äî MODIFIED AREA END ‚Äî‚Äî‚Äî */

  @media (max-width: 767px) {
    .container {
      grid-template-columns: 1fr;
      gap: 1.5em;
    }
    header h1 { font-size: 1.8em; }
    header p  { font-size: 1em; }
  }

  @media (max-width: 480px) {
    .cta-button,
    .view-btn {
      width: 100%;
      box-sizing: border-box;
      font-size: 1em;
    }
  }
.zoomable-image {
  cursor: zoom-in;
  transition: transform 0.3s ease;
}

.image-modal {
  display: flex;
  justify-content: center;
  align-items: center;
  position: fixed;
  z-index: 9999;
  left: 0; top: 0;
  width: 100vw;
  height: 100vh;
  background-color: rgba(0,0,0,0.9);
}

.image-modal.hidden {
  display: none;
}

.image-modal img {
  max-width: 90%;
  max-height: 90%;
  border-radius: 10px;
  box-shadow: 0 0 20px rgba(0,0,0,0.5);
}
.memory-item .text-content p {
  text-align: justify;
}
.capsule-content {
  height: 100vh;              /* or a fixed height like 500px */
  overflow-y: auto;
  padding-right: 1rem;        /* to avoid content touching scrollbar */
}
#sealWishesBtn {
  background-color: var(--secondary-color);
  display: block;            /* or inline-block */
  width: 100%;               /* full width if desired, or set to auto */
  max-width: 300px;          /* optional, keeps it from being too wide */
  margin: 0 auto;            /* center horizontally if using max-width */
  text-align: center;        /* center the text */
  padding: 10px 20px;        /* padding for better tap target */
  font-size: 1rem;           /* readable font size */
  box-sizing: border-box;    /* prevent padding from affecting size */
}
@media (max-width: 600px) {
  #sealWishesBtn {
    width: 90%;
    margin: 10px auto;
    text-align: center;
  }
}
.cta-button {
  display: block;              /* make it a block to center using margin */
  margin: 0 auto;              /* center the button horizontally */
  text-align: center;          /* center the text inside */
  padding: 12px 24px;
  font-size: 1rem;
  background-color: #84A7E0;
  color: white;
  border-radius: 8px;
  text-decoration: none;
  width: fit-content;          /* make the button fit its text size */
  max-width: 100%;
}
.image-modal {
  display: flex;
  justify-content: center;
  align-items: flex-start; /* start at top */
  padding-top: 40px;
  position: fixed;
  z-index: 9999;
  left: 0;
  top: 0;
  width: 100vw;
  height: 100vh;
  background-color: rgba(0,0,0,0.9);
  overflow-y: auto;
}

.image-modal-inner {
  background: white;
  border-radius: 10px;
  max-width: 700px;
  width: 90%;
  margin: auto;
  padding: 1.5em;
  display: flex;
  flex-direction: column;
  align-items: center;
  box-shadow: 0 0 20px rgba(0,0,0,0.3);
}

.modal-image {
  max-width: 100%;
  height: auto;
  margin-bottom: 1em;
  border-radius: 8px;
}

.modal-full-message {
  max-height: 300px;
  overflow-y: auto;
  text-align: justify;
  color: #333;
  font-size: 1rem;
  line-height: 1.5;
  padding: 0.5em;
  width: 100%;
  border-top: 1px solid #ccc;
}
.image-close {
  position: absolute;
  top: -3.5px;
  right: 10px;
  color: #846fff;
  font-size: 28px;
  font-weight: bold;
  cursor: pointer;
  z-index: 2;
}

.image-modal-inner {
  position: relative;
  background: white;
  border-radius: 10px;
  max-width: 700px;
  width: 90%;
  margin: auto;
  padding: 2em 1.5em 1.5em 1.5em;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.modal, .modal-content, .modal-body, #modalWishText {
  box-sizing: border-box;
}
.modal-content {
  max-width: 100%;
  width: 90%;
  overflow-x: hidden; /* force horizontal control */
}
html, body {
  overflow-x: hidden;
  width: 100%;
}


</style>

</head>
<body>

    <header>
        <h1>Happy 16th Monthsary</h1>
        <p>16 Months of LDR Love - A Look Back and A Look Forward</p>
        <div class="countdown-container">
            <span id="countdown">Loading countdown...</span>
        </div>
    </header>

    <main class="container">
        <!-- Time Capsule Section -->
        <section class="card time-capsule-card">
            <h2><span role="img" aria-label="time capsule">‚è≥</span> Past Treasures</h2>
            <div class="time-capsule-door" id="openCapsuleBtn">
                Click to Open Our Time Capsule!
            </div>
            <div class="capsule-content" id="capsuleContent">
                <!-- Memory Item 1 -->
                <div class="memory-item">
                    <img src="1st.jpg" alt="PASS to LAST" class="zoomable-image"
                           data-fullmsg="Remember this night? dadehüí∏ HAHAHAHA.
                            Wala nga lang yung message ko dahil deleted acc na, pero ito yung nag fm ako sayo kasi pinilit ni laby HAHAHAHA.
                            I always say PASS kay Laby non kasi di pa raw ready KUNO sa commitment, pero sabi naman ni Laby chat chat lang.
                            Syempre ito naman ako, umoo na lang para di na mangulit.
                            Pero look at us now, nag karoon man ng hiwalayan but still nag patuloy pa rin.
                            Pano kaya kung nag insist ako na mag PASS lang sayo non? wala siguro akong Maganda at Sexy na asawa ngayon.
                            From PASS to LAST, LAST in Girlfriend, LAST na ka bebetime, LAST na tatawaging Asawa ko.">
                    
                    <div class="text-content">
                        <h3>PASS to LAST</h3>
                        <p>The night a chat became a chapter.
                        </p> 
                        <p><em>Date: February 16, 2024</em></p>
                    </div>
                </div>

                <!-- Memory Item 2 -->
                <div class="memory-item">
                    <img src="2nd.png" alt="MAYBE to MOMMY" class="zoomable-image"
                           data-fullmsg="This one naman is the date marked as our Anniversary.
                           I always remember this day. Sinabi mo rito na ang hirap mag selos kasi wala naman tayong label.
                           Ino-ot mo kasi na ata non na baka nanchichix pa ako since wala naman tayong label.
                           Kaya nag lagay na tayo ng label para mabigyan kita ng peace of mind at assurance na wala akong ibang babae.
                           Ang bilis no? HAHAHAHA. Pero sabbi nga, di naman ligawan ang pinapatagal, yung relasyon.
                           From MAYBE to Mommy, dating di pa sure sa commitment, ngayon tinatawag ka ng MOMMY">
                    <div class="text-content">
                        <h3>MAYBE to MOMMY</h3>
                        <p>
                            The day forever got its start.
                        </p>
                        <p><em>Date: February 21, 2024</em></p>
                    </div>
                </div>

                <!-- Memory Item 3 (with audio) -->
                <div class="memory-item">
                    <img src="3rd.png" alt="TEMPORARY to ANNIVERSARY" class="zoomable-image"
                          data-fullmsg="Remember this Video? nung 11th monthsary natin, nag send ako ng video message sa'yo.
                          Para sa Anniversary talaga yon e HAHAHAHA. Kaso wala ako maisip na pakulo e HAHAHA.
                          Pwede mo siya pakinggan diyan sa vm or i download para makita yung video.
                          How about this picture? naalala mo? This is our first Anniversary, also the first time na nauna ka bumati HAHAHAHA.
                          Naks naman, nauna na rin siya. Medyo di natin to na celebrate kasi sumabay yung sakit ng puson mo.
                          Pero kahit ganun, masaya pa rin siya kasi di natin akalaing aabot tayo ng year.
                          Kala mo pa non na temporary lang ako and mawawala rin since ldr tayo.
                          Pero look at us now, umabot tayo ng 1 year. 1 year of love, 1 year of laughter, 1 year of us.
                          From TEMPORARY to ANNIVERSARY, from a year of uncertainty to a lifetime of love.">
                    <div class="text-content">
                        <h3>TEMPORARY to ANNIVERSARY</h3>
                        <p>
                          The day we marked one year of forever.
                        </p>
                        <audio controls class="audio-player">
                            <source src="vm.mp3" type="audio/mpeg">
                            Your browser does not support the audio element.
                        </audio>
                        <p><em>Date: February 21, 2025</em></p>
                    </div>
                </div>

                <!-- Add more memory items as needed -->
                <div class="memory-item">
                    <img src="4th.png" alt="ANNIVERSARY to SORRY" class="zoomable-image"
                    data-fullmsg="Ito yung araw na sinira ko yung pinangako kong protektahan.
                    I did the worst thing I could do, I broke your trust.
                    I know it was a mistake, and I regret it every day.
                    Instead of informing you like i always do, I chose to hide it.r
                    I thought it was for the best, but I was wrong. It only made things worse.
                    I know I hurt you, and I am truly sorry for that. I heard you cry but I didn't do anything.
                    From ANNIVERSARY to SORRY, Sorry for breaking your heart that day.">
                    <div class="text-content">
                        <h3>ANNIVERSARY to SORRY</h3>
                        <p>The day I broke what I promised to protect.</p>
                        <p><em>Date: March 10, 2025</em></p>
                    </div>
                </div>

                <div class="memory-item">
                    <img src="5th.png" alt="BREAK-UP to MAKE-UP" class="zoomable-image"
                    data-fullmsg="The day na nag sabi ako ng comeback. Nag start yon nung nag pa-parinigan tayo sa notes.
                    Until di ko na natiis na hanggang don lang tayo. Nag initiate na ako na i-mention ka sa isang video sa TikTok.
                    It's a video that is saying Can we try it again? with a song of The man who can't be moved.
                    I know na pa move on ka na non, but I still tried. I still try na bulabugin yung buhay mo ulit.
                    Nung una, akala ko bu-bulyawan mo ako dahil iniwan kita kasi base sa shared post mo, grabe yung galit mo sakin.
                    Pero akala lang pala yon. Akala ko rin na hindi ka papayag sa comeback but you did. Hindi man agad-agad but still you said yes.
                    From BREAK-UP to MAKE-UP, from a painful goodbye to a beautiful hello again.">
                    <div class="text-content">
                        <h3>BREAK-UP to MAKE-UP</h3>
                        <p>The day we found forever, again.</p>
                        <p><em>Date: May 4, 2025</em></p>
                    </div>
                </div>

                <p style="text-align: center; font-style: italic; color: #777;">
                    More memories to come as our story unfolds...
                </p>
            </div>
        </section>

        <!-- Future Wishes Section -->
        <section class="card future-wishes-card">
            <h2><span role="img" aria-label="star">‚ú®</span> Future Wishes</h2>
            <p style="text-align: center; margin-bottom: 1.5em;">
                What are your dreams for us baba? Write down your hopes, plans, or simply anything you're looking forward to!
            </p>
            <textarea id="futureWishesText" placeholder="Type your beautiful wishes here..."></textarea>
            <div class="instructions">
                Type your wish above and click "Seal My Wishes" to add it to the collection of wishes below!
            </div>
            <a href="#" class="cta-button" id="sealWishesBtn">Seal My Wishes</a>
            <div id="messageBox" class="message-box">
                Your wish has been sealed!
            </div>
            <!-- New: Display area for wishes -->
            <div id="wishesDisplayArea" class="wishes-display-area">
                <p class="no-wishes-yet">No wishes sealed yet. Start typing above!</p>
            </div>
        </section>
    </main>
    
    <footer>
        <p>&copy; 2025 Our Love Story. Created by your baba.</p>
    </footer>
    <!-- Wish Detail Modal -->
<div id="wishModal" class="modal hidden">
  <div class="modal-backdrop"></div>
  <div class="modal-content">
    <button class="modal-close">&times;</button>
    <div class="modal-body">
      <p id="modalWishText"></p>
    </div>
    <button id="modalDeleteBtn" class="cta-button">Delete This Wish</button>
  </div>
</div>

<!-- Image Zoom Modal -->
<!-- Image Zoom Modal -->
<div id="imageModal" class="image-modal hidden">
  <div class="image-modal-inner">
    <span class="image-close">&times;</span>
    <img class="modal-image" id="modalImage">
    <div class="modal-full-message" id="modalFullMessage"></div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  // ‚Äî‚Äî‚Äî‚Äî‚Äî Element refs ‚Äî‚Äî‚Äî‚Äî‚Äî
  const countdownElement = document.getElementById('countdown');
  const openCapsuleBtn  = document.getElementById('openCapsuleBtn');
  const capsuleContent   = document.getElementById('capsuleContent');
  const wishInput        = document.getElementById('futureWishesText');
  const sealBtn          = document.getElementById('sealWishesBtn');
  const wishBox          = document.getElementById('messageBox');
  const displayArea      = document.getElementById('wishesDisplayArea');
  const modal            = document.getElementById('wishModal');
  const backdrop         = modal.querySelector('.modal-backdrop');
  const closeBtn         = modal.querySelector('.modal-close');
  const modalText        = document.getElementById('modalWishText');
  const deleteBtn        = document.getElementById('modalDeleteBtn');

  // ‚Äî‚Äî‚Äî‚Äî‚Äî Countdown ‚Äî‚Äî‚Äî‚Äî‚Äî
  const monthsaryDate = new Date('June 21, 2025 00:00:00').getTime();// change time for countdown
  setInterval(() => {
    const now = Date.now();
    const dist = monthsaryDate - now;
    if (dist < 0) {
      countdownElement.textContent = "Happy 16th Monthsary, Asawa ko!";
    } else {
      const d = Math.floor(dist / 86400000);
      const h = Math.floor((dist % 86400000) / 3600000);
      const m = Math.floor((dist % 3600000) / 60000);
      const s = Math.floor((dist % 60000) / 1000);
      countdownElement.textContent = `${d}d ${h}h ${m}m ${s}s until our 16th Monthsary!`;
    }
  }, 1000);

  // ‚Äî‚Äî‚Äî‚Äî‚Äî Time Capsule Lock ‚Äî‚Äî‚Äî‚Äî‚Äî
  const unlockDate = new Date('June 21, 2025 00:00:00'); // change to time when it will open
  function toggleCapsule() {
    if (!openCapsuleBtn.classList.contains('locked')) {
      capsuleContent.classList.toggle('open');
      openCapsuleBtn.textContent = capsuleContent.classList.contains('open')
        ? 'üîìOur Time Capsule is Open!üîì'
        : 'üîëClick to Open Our Time Capsuleüîë';
    }
  }
  function checkLock() {
    if (Date.now() < unlockDate) {
      openCapsuleBtn.textContent = 'üîí Locked Until Monthsary! üîí';
      openCapsuleBtn.classList.add('locked');
      openCapsuleBtn.removeEventListener('click', toggleCapsule);
    } else {
      openCapsuleBtn.textContent = 'Click to Open Our Time Capsule!';
      openCapsuleBtn.classList.remove('locked');
      openCapsuleBtn.addEventListener('click', toggleCapsule);
    }
  }
    checkLock();
    setInterval(checkLock, 60000);

  // ‚Äî‚Äî‚Äî‚Äî‚Äî Wishes Display ‚Äî‚Äî‚Äî‚Äî‚Äî
  function displayWishes() {
    let wishes = JSON.parse(localStorage.getItem('sealedWishes'));
    if (!Array.isArray(wishes)) wishes = [];
    displayArea.innerHTML = '';

    if (wishes.length === 0) {
      displayArea.innerHTML = '<p class="no-wishes-yet">No wishes sealed yet. Start typing above!</p>';
      return;
    }

    wishes.forEach((wishObj, idx) => {
      // Handle both string entries and object entries
      const text = typeof wishObj === 'string'
        ? wishObj
        : (wishObj.text || '');
      const ts = (wishObj && wishObj.timestamp)
        ? new Date(wishObj.timestamp).toLocaleString()
        : '';
      const preview = text.length > 100
        ? text.slice(0, 100) + '‚Ä¶'
        : text;

      const div = document.createElement('div');
      div.className = 'wish-entry';
      div.innerHTML = `
        <span class="date">${ts ? 'Sealed on ' + ts : ''}</span>
        <p class="content">${preview}</p>
        <button class="view-btn cta-button" data-idx="${idx}">View</button>
      `;
      displayArea.appendChild(div);
    });

    displayArea.scrollTop = displayArea.scrollHeight;
  }

  // ‚Äî‚Äî‚Äî‚Äî‚Äî Seal New Wishes ‚Äî‚Äî‚Äî‚Äî‚Äî
  sealBtn.addEventListener('click', e => {
    e.preventDefault();
    const text = wishInput.value.trim();
    if (!text) {
      wishBox.textContent = 'Please write something before sealing!';
      wishBox.style.backgroundColor = '#f8d7da';
      wishBox.style.color = '#721c24';
    } else {
      const arr = JSON.parse(localStorage.getItem('sealedWishes'));
      const wishes = Array.isArray(arr) ? arr : [];
      wishes.push({ text, timestamp: new Date().toISOString() });
      localStorage.setItem('sealedWishes', JSON.stringify(wishes));
      wishInput.value = '';
      wishBox.textContent = 'Your wish has been noted!';
      wishBox.style.backgroundColor = '#d4edda';
      wishBox.style.color = '#155724';
      displayWishes();
    }
    wishBox.classList.add('show');
    setTimeout(() => wishBox.classList.remove('show'), 3000);
  });

  // ‚Äî‚Äî‚Äî‚Äî‚Äî Modal Logic ‚Äî‚Äî‚Äî‚Äî‚Äî
  let currentIdx = null;
  displayArea.addEventListener('click', e => {
    if (e.target.matches('.view-btn')) {
      currentIdx = +e.target.dataset.idx;
      const arr = JSON.parse(localStorage.getItem('sealedWishes'));
      const wishText = (Array.isArray(arr) && arr[currentIdx])
        ? (typeof arr[currentIdx] === 'string' ? arr[currentIdx] : arr[currentIdx].text)
        : '';
      modalText.textContent = wishText;
      modal.classList.remove('hidden');
    }
  });
  [backdrop, closeBtn].forEach(el => el.addEventListener('click', () => {
    modal.classList.add('hidden');
    currentIdx = null;
  }));
// 3) Delete Wish (with confirmation)
deleteBtn.addEventListener('click', () => {
  // Ask the user to confirm
  const ok = confirm('Are you sure you want to delete this wish?');
  if (!ok) {
    return; // user cancelled, do nothing
  }

  // Proceed with deletion
  const arr = JSON.parse(localStorage.getItem('sealedWishes')) || [];
  if (currentIdx !== null && arr[currentIdx]) {
    arr.splice(currentIdx, 1);
    localStorage.setItem('sealedWishes', JSON.stringify(arr));
    displayWishes();
  }

  // Close the modal
  modal.classList.add('hidden');
  currentIdx = null;
});


  // ‚Äî‚Äî‚Äî‚Äî‚Äî INITIAL POPULATE ‚Äî‚Äî‚Äî‚Äî‚Äî
  displayWishes();
});
// ‚Äî‚Äî‚Äî‚Äî‚Äî Image Zoom on Click ‚Äî‚Äî‚Äî‚Äî‚Äî
const imageModal = document.getElementById('imageModal');
const modalImage = document.getElementById('modalImage');
const closeImage = document.querySelector('.image-close');

// Automatically add zoom class to all memory-item images
document.querySelectorAll('.memory-item img').forEach(img => {
  img.classList.add('zoomable-image');
img.addEventListener('click', () => {
  modalImage.src = img.src;
  const fullMessage = img.getAttribute('data-fullmsg') || 'No message.';
  document.getElementById('modalFullMessage').textContent = fullMessage;
  imageModal.classList.remove('hidden');
});

});

// Close the modal
closeImage.addEventListener('click', () => {
  imageModal.classList.add('hidden');
});
imageModal.addEventListener('click', (e) => {
  if (e.target === imageModal) {
    imageModal.classList.add('hidden');
  }
});

</script>
</body>
</html>
